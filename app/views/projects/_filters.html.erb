<div class="button-group">
  <details>
    <summary aria-haspopup="true">
      <span class="button small light<%= ' orange' if params[:user].present? %>">Assigned to <%= icon_tag('triangle-down') %></span>
    </summary>
    <ul class="box dropdown">
      <% @users.each do |user| %>
        <li role="menuitem">
          <%= link_to "#{build_label(user.contact, :name)} (#{Project.filter_by_user(user).count})",
          url_for(user: user),
          class: "box-row small#{ ' orange-color' if params[:user] == user.id.to_s }" %>
        </li>
      <% end %>
    </ul>
  </details>

  <details>
    <summary aria-haspopup="true">
      <span class="button small light<%= ' orange' if params[:status].present? %>">Status <%= icon_tag('triangle-down') %></span>
    </summary>
    <ul class="box dropdown">
      <% Project.distinct.pluck(:status).sort.each do |status| %>
        <li role="menuitem">
          <%= link_to "#{status.capitalize} (#{Project.where(status: status).count})",
          url_for(status: status),
          class: "box-row small#{ ' orange-color' if params[:status] == status }" %>
        </li>
      <% end %>
    </ul>
  </details>
</div>

<div class="button-group">
  <%= link_to "Your active cases", url_for(user: current_user, status: 'active'), class: "button small light green" %>
  <%= link_to "Show all", url_for, class: 'button small light blue' %>
</div>
