<ul class="timeline" id="timesheet">
  <li class="timeline-date">
    <ul class="box">
      <li class="box-row">
        <div class="card">
          <%= form_with(model: [@project, @project.activities.build], local: false) do |form| %>
            <%= form.text_field(:label, required: true, placeholder: 'Label') %>
            <%= form.select(:category, Activity::CATEGORIES, required: true) %>
            <%= form.date_field(:date, value: Date.today, required: true, placeholder: 'Date') %>
            <%= form.number_field(:duration, step: 0.1, required: true, placeholder: 'Duration (0.1 format)') %>
            <%= form.number_field(:fee, step: 0.05, value: current_user.default_fee, required: true, placeholder: 'Fee (CHF / hour)') %>
            <%= form.submit 'Create', class: 'button blue' %>
          <% end %>
        </div>
      </li>
    </ul>
  </li>
  <% @project.activities.includes(:user).group_by(&:date).sort.reverse.each do |date| %>
  <li class="timeline-date" data-date="<%= date.first.strftime("%F") %>">
    <header class="timeline-header">
      <span class="timeline-icon"><%= icon_tag('git-commit') %></span>
      <span class="mute">Activity logged for&nbsp;</span><%= date.first.strftime("%d.%m.%Y") %>
    </header>
    <ul class="box">
      <% date.last.sort_by(&:created_at).reverse.each do |activity| %>
        <li class="box-row"><%= render 'activity', activity: activity %></li>
      <% end %>
    </ul>
  </li>
  <% end %>
</ul>
